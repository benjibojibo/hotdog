<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pokemon-Style Zombie Shooter</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        margin: 0;
        background: #90c070;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: monospace;
    }

    canvas {
        background: #80b060;
        border: 8px solid #305030;
        image-rendering: pixelated;
    }

    #uiBox {
        position: absolute;
        bottom: 20px;
        width: 480px;
        padding: 10px;
        font-size: 20px;
        color: #203020;
        background: #e0f8d0;
        border: 4px solid #506850;
        font-family: monospace;
    }

    #gameOver {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0,0,0,0.8);
        color: #e0f8d0;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        font-size: 32px;
        font-family: monospace;
    }

    button {
        margin-top: 20px;
        padding: 12px 20px;
        font-size: 22px;
        border: 4px solid #203020;
        background: #e0f8d0;
        cursor: pointer;
        font-family: monospace;
    }
</style>
</head>

<body>

<canvas id="game" width="480" height="320"></canvas>

<div id="uiBox">Score: <span id="score">0</span></div>

<div id="gameOver">
    <div>GAME OVER</div>
    <button onclick="restart()">Restart</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const W = canvas.width;
const H = canvas.height;

const scoreEl = document.getElementById("score");
const gameOverScreen = document.getElementById("gameOver");

// Color palette
const OUTLINE = "#203020";
const PLAYER_BODY = "#e0f8d0";
const ZOMBIE_BODY = "#78c030";

// -------------------- PLAYER --------------------
const player = {
    x: W/2,
    y: H/2,
    size: 16,
    speed: 2.2,
    dirX: 1,   // last movement direction
    dirY: 0,
};

// -------------------- GAME DATA --------------------
let zombies = [];
let bullets = [];
let spawnRate = 90;  // Slower start
let frame = 0;
let score = 0;
let alive = true;

// -------------------- INPUT --------------------
let keys = {};
document.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
document.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

// -------------------- DRAW OUTLINED SPRITES --------------------
function drawOutlinedRect(x, y, size, body, outline) {
    ctx.fillStyle = outline;
    ctx.fillRect(x-size/2-1, y-size/2-1, size+2, size+2);

    ctx.fillStyle = body;
    ctx.fillRect(x-size/2, y-size/2, size, size);
}

// -------------------- PLAYER --------------------
function drawPlayer() {
    drawOutlinedRect(player.x, player.y, player.size, PLAYER_BODY, OUTLINE);
}

function updatePlayer() {
    let moved = false;

    if (keys["w"] || keys["arrowup"])    { player.y -= player.speed; player.dirX = 0; player.dirY = -1; moved=true; }
    if (keys["s"] || keys["arrowdown"])  { player.y += player.speed; player.dirX = 0; player.dirY = 1; moved=true; }
    if (keys["a"] || keys["arrowleft"])  { player.x -= player.speed; player.dirX = -1; player.dirY = 0; moved=true; }
    if (keys["d"] || keys["arrowright"]) { player.x += player.speed; player.dirX = 1; player.dirY = 0; moved=true; }

    player.x = Math.max(0, Math.min(W, player.x));
    player.y = Math.max(0, Math.min(H, player.y));

    // Shooting
    if (keys[" "] && frame % 12 === 0) shoot();
}

// -------------------- BULLETS --------------------
function shoot() {
    bullets.push({
        x: player.x,
        y: player.y,
        dx: player.dirX,
        dy: player.dirY,
        size: 6,
        speed: 5
    });
}

function updateBullets() {
    bullets.forEach((b, i) => {
        b.x += b.dx * b.speed;
        b.y += b.dy * b.speed;

        // remove offscreen bullets
        if (b.x < -20 || b.x > W+20 || b.y < -20 || b.y > H+20) {
            bullets.splice(i, 1);
        }
    });
}

function drawBullets() {
    bullets.forEach(b => {
        drawOutlinedRect(b.x, b.y, b.size, "#ffffff", OUTLINE);
    });
}

// -------------------- ZOMBIES --------------------
function spawnZombie() {
    let side = Math.floor(Math.random()*4);
    let x, y;

    if (side === 0) { x = Math.random()*W; y = -20; }
    if (side === 1) { x = Math.random()*W; y = H+20; }
    if (side === 2) { x = -20; y = Math.random()*H; }
    if (side === 3) { x = W+20; y = Math.random()*H; }

    zombies.push({
        x, y,
        size: 16,
        speed: 0.5 + Math.random()*0.5   // MUCH SLOWER
    });
}

function updateZombies() {
    zombies.forEach((z, zi) => {
        const dx = player.x - z.x;
        const dy = player.y - z.y;
        const dist = Math.hypot(dx, dy);

        z.x += dx/dist * z.speed;
        z.y += dy/dist * z.speed;

        // check collision with player
        if (dist < (z.size + player.size)/2) {
            alive = false;
            gameOverScreen.style.display = "flex";
        }

        // check collision with bullets
        bullets.forEach((b, bi) => {
            const d2 = Math.hypot(z.x - b.x, z.y - b.y);
            if (d2 < (z.size + b.size)/2) {
                zombies.splice(zi,1);
                bullets.splice(bi,1);
                score += 10;
                scoreEl.textContent = score;
            }
        });
    });
}

function drawZombies() {
    zombies.forEach(z => drawOutlinedRect(z.x, z.y, z.size, ZOMBIE_BODY, OUTLINE));
}

// -------------------- GAME LOOP --------------------
function loop() {
    if (!alive) return;

    ctx.clearRect(0,0,W,H);

    updatePlayer();
    updateZombies();
    updateBullets();

    drawPlayer();
    drawZombies();
    drawBullets();

    frame++;

    if (frame % 10 === 0) {
        score++;
        scoreEl.textContent = score;
    }

    if (frame % spawnRate === 0) {
        spawnZombie();
        if (spawnRate > 35) spawnRate--;
    }

    requestAnimationFrame(loop);
}

// -------------------- RESTART --------------------
function restart() {
    alive = true;
    zombies = [];
    bullets = [];
    spawnRate = 90;
    frame = 0;
    score = 0;
    scoreEl.textContent = "0";
    player.x = W/2;
    player.y = H/2;
    gameOverScreen.style.display = "none";
    loop();
}

loop();
</script>

</body>
</html>
